<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Include Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js"></script>
    <style>
        /* Your CSS styles here */
        @font-face {
            font-family: 'GT Estis';
            src: url('path-to-your-font-files/GT-Estis-Regular.woff2') format('woff2'),
                 url('path-to-your-font-files/GT-Estis-Regular.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }
        body {
            font-family: 'GT Estis', sans-serif;
            background-color: #1a202c; /* Adjust to your preference */
            color: #ffffff; /* Adjust to your preference */
            padding: 20px;
        }
        .image-cell input {
            display: none;
        }
        .image-cell img {
            max-width: 100px;
            max-height: 100px;
        }
        .social-media-text {
            word-wrap: break-word;
        }
        .success-animation {
            animation: scale-up-center 0.4s cubic-bezier(0.39, 0.575, 0.565, 1) both;
        }
        @keyframes scale-up-center {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body>

<h1 class="text-3xl font-bold mb-6">Weekly Planner</h1>

<table class="min-w-full bg-gray-800 border border-gray-700 mb-6">
    <thead>
        <tr class="bg-gray-700">
            <th class="px-6 py-3 border border-gray-600">Date</th>
            <th class="px-6 py-3 border border-gray-600">Image</th>
            <th class="px-6 py-3 border border-gray-600">Social Media Text</th>
            <th class="px-6 py-3 border border-gray-600">Notes</th>
            <th class="px-6 py-3 border border-gray-600">Actions</th>
        </tr>
    </thead>
    <tbody>
        <!-- Monday -->
        <tr>
            <td class="px-6 py-4 border border-gray-600">Monday</td>
            <td class="px-6 py-4 border border-gray-600 image-cell">
                <button class="bg-blue-600 text-white px-4 py-2 rounded" onclick="document.getElementById('fileInput1').click()">Upload Image</button>
                <input type="file" id="fileInput1" accept="image/*" onchange="loadImage(event, 'img1')">
                <br>
                <img id="img1" src="" alt="">
            </td>
            <td class="px-6 py-4 border border-gray-600 social-media-text" contenteditable="true"></td>
            <td class="px-6 py-4 border border-gray-600 notes" contenteditable="true"></td>
            <td class="px-6 py-4 border border-gray-600">
                <button id="saveButton1" class="bg-green-600 text-white px-4 py-2 rounded" onclick="saveContent('img1', 'social-media-text1', 'notes1')">Save</button>
                <span id="successMessage1" class="text-green-400 font-semibold ml-2"></span>
            </td>
        </tr>
        <!-- Include other days similarly -->
    </tbody>
</table>

<script>
    // Your Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyC0qP-Nd2_vUMclBs7t_7LRLJT9lPn7dTk",
        authDomain: "planner-a66be.firebaseapp.com",
        projectId: "planner-a66be",
        storageBucket: "planner-a66be.appspot.com",
        messagingSenderId: "275446683353",
        appId: "1:275446683353:web:c7b155b01592b17c9f90c8",
        measurementId: "G-VZ9BQEMJPN"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();

    // Function to handle image upload and preview
    function loadImage(event, imgId) {
        const file = event.target.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById(imgId).setAttribute('src', e.target.result);
        }
        reader.readAsDataURL(file);
    }

    // Function to save content to Firebase Storage
    function saveContent(imageId, socialMediaTextId, notesId) {
        const imageFile = document.getElementById(imageId).src;
        const socialMediaText = document.getElementById(socialMediaTextId).innerText;
        const notes = document.getElementById(notesId).innerText;

        // Generate a unique key for each day's data (you can modify this as per your requirement)
        const storageRef = storage.ref();
        const imageRef = storageRef.child(`images/${imageId}`);

        fetch(imageFile)
            .then(response => response.blob())
            .then(blob => {
                imageRef.put(blob).then(() => {
                    console.log('Image uploaded successfully');
                    // Display success message
                    document.getElementById(`successMessage${imageId.slice(-1)}`).innerText = 'Saved successfully!';
                    // Animate save button
                    document.getElementById(`saveButton${imageId.slice(-1)}`).classList.add('success-animation');
                    setTimeout(() => {
                        document.getElementById(`saveButton${imageId.slice(-1)}`).classList.remove('success-animation');
                    }, 1000); // Remove animation class after 1 second
                });
            })
            .catch(error => console.error('Error uploading image: ', error));
    }
</script>

</body>
</html>
